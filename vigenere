def vigenere_encrypt(text, key):
    key = key.upper()
    encrypted = ""
    key_index = 0
    for char in text:
        if char.isalpha():
            ascii_offset = 65 if char.isupper() else 97
            key_shift = ord(key[key_index % len(key)]) - 65
            encrypted += chr((ord(char) - ascii_offset + key_shift) % 26 + ascii_offset)
            key_index += 1
        else:
            encrypted += char
    return encrypted

def vigenere_decrypt(text, key):
    key = key.upper()
    decrypted = ""
    key_index = 0
    for char in text:
        if char.isalpha():
            ascii_offset = 65 if char.isupper() else 97
            key_shift = ord(key[key_index % len(key)]) - 65
            decrypted += chr((ord(char) - ascii_offset - key_shift) % 26 + ascii_offset)
            key_index += 1
        else:
            decrypted += char
    return decrypted

if __name__ == "__main__":
    message = "Hello, World!"
    key = "KEY"
    encrypted = vigenere_encrypt(message, key)
    decrypted = vigenere_decrypt(encrypted, key)
    print(f"Original: {message}")
    print(f"Encrypted: {encrypted}")
    print(f"Decrypted: {decrypted}")
